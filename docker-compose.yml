version: '3.4'
services:
  node-server:
    image: grpcweb/node-server
    build:
      context: .
      target: node-server
    ports: 
      - "9090:9090"
  envoy:
    image: grpcweb/envoy
    build:
      context: .
      target: envoy
    ports:
      - "8080:8080"
    depends_on:
      - node-server
  commonjs-client:
    image: grpcweb/commonjs-client
    build:
      context: .
      target: commonjs-client
    depends_on:
      - envoy
    ports:
      - "8081:80"
